{"name":"DeathSysClick","contentType":"TRIGGER","description":"Vote for the Metastasis death system.","isEnabled":true,"initiallyOff":false,"runOnMapInit":true,"events":[{"name":"TriggerRegisterDialogEventBJ","type":"EVENT","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"DeathVoteDialog"}]}],"conditions":[],"actions":[{"name":"CommentString","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"Voting. Since Spectator mode is default, the voting really only ends if enough votes accumulate for Instant Boot mode."}]},{"name":"IfThenElseMultiple","type":"ACTION","isEnabled":true,"parameters":[],"statements":[[{"name":"OperatorCompareButton","type":"CONDITION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetClickedButtonBJ","statement":{"type":"CALL","isEnabled":true,"name":"GetClickedButtonBJ","parameters":[]}},{"type":"PRESET","value":"OperatorEqualENE"},{"type":"VARIABLE","value":"DeathVoteDialog_Buttons","arrayIndex":{"type":"VALUE","value":"1"}}]}],[{"name":"DisplayTextToForce","type":"ACTION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}},{"type":"FUNCTION","value":"OperatorString","statement":{"type":"CALL","isEnabled":true,"name":"OperatorString","parameters":[{"type":"FUNCTION","value":"GetPlayerName","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayerName","parameters":[{"type":"FUNCTION","value":"GetTriggerPlayer","statement":{"type":"CALL","isEnabled":true,"name":"GetTriggerPlayer","parameters":[]}}]}},{"type":"VALUE","value":" |cffFF8000has voted for spectator mode!|r"}]}}]},{"name":"IfThenElseMultiple","type":"ACTION","isEnabled":true,"parameters":[],"statements":[[{"name":"OperatorCompareInteger","type":"CONDITION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"InstantBootMode_Votes"},{"type":"PRESET","value":"OperatorGreaterEq"},{"type":"FUNCTION","value":"OperatorInt","statement":{"type":"CALL","isEnabled":true,"name":"OperatorInt","parameters":[{"type":"FUNCTION","value":"CountPlayersInForceBJ","statement":{"type":"CALL","isEnabled":true,"name":"CountPlayersInForceBJ","parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}}]}},{"type":"PRESET","value":"OperatorDivide"},{"type":"VALUE","value":"2"}]}}]}],[{"name":"DisplayTextToForce","type":"ACTION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}},{"type":"VALUE","value":"TRIGSTR_2358"}]},{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"DeathType"},{"type":"VALUE","value":"1"}]},{"name":"ForForceMultiple","type":"ACTION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}}],"statements":[[{"name":"DialogDisplayBJ","type":"ACTION","isEnabled":true,"parameters":[{"type":"PRESET","value":"ShowHideHide"},{"type":"VARIABLE","value":"DeathVoteDialog"},{"type":"FUNCTION","value":"GetEnumPlayer","statement":{"type":"CALL","isEnabled":true,"name":"GetEnumPlayer","parameters":[]}}]}]]}]]}],[{"name":"IfThenElseMultiple","type":"ACTION","isEnabled":true,"parameters":[],"statements":[[{"name":"OperatorCompareButton","type":"CONDITION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetClickedButtonBJ","statement":{"type":"CALL","isEnabled":true,"name":"GetClickedButtonBJ","parameters":[]}},{"type":"PRESET","value":"OperatorEqualENE"},{"type":"VARIABLE","value":"DeathVoteDialog_Buttons","arrayIndex":{"type":"VALUE","value":"2"}}]}],[{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"InstantBootMode_Votes"},{"type":"FUNCTION","value":"OperatorInt","statement":{"type":"CALL","isEnabled":true,"name":"OperatorInt","parameters":[{"type":"VARIABLE","value":"InstantBootMode_Votes"},{"type":"PRESET","value":"OperatorAdd"},{"type":"VALUE","value":"1"}]}}]},{"name":"DisplayTextToForce","type":"ACTION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}},{"type":"FUNCTION","value":"OperatorString","statement":{"type":"CALL","isEnabled":true,"name":"OperatorString","parameters":[{"type":"FUNCTION","value":"GetPlayerName","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayerName","parameters":[{"type":"FUNCTION","value":"GetTriggerPlayer","statement":{"type":"CALL","isEnabled":true,"name":"GetTriggerPlayer","parameters":[]}}]}},{"type":"VALUE","value":" |cffFF8000has voted for instant-boot mode!|r"}]}}]},{"name":"IfThenElseMultiple","type":"ACTION","isEnabled":true,"parameters":[],"statements":[[{"name":"OperatorCompareInteger","type":"CONDITION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"InstantBootMode_Votes"},{"type":"PRESET","value":"OperatorGreaterEq"},{"type":"FUNCTION","value":"OperatorInt","statement":{"type":"CALL","isEnabled":true,"name":"OperatorInt","parameters":[{"type":"FUNCTION","value":"CountPlayersInForceBJ","statement":{"type":"CALL","isEnabled":true,"name":"CountPlayersInForceBJ","parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}}]}},{"type":"PRESET","value":"OperatorDivide"},{"type":"VALUE","value":"2"}]}}]}],[{"name":"DisplayTextToForce","type":"ACTION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}},{"type":"VALUE","value":"TRIGSTR_2355"}]},{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"DeathType"},{"type":"VALUE","value":"2"}]},{"name":"ForForceMultiple","type":"ACTION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetPlayersAll","statement":{"type":"CALL","isEnabled":true,"name":"GetPlayersAll","parameters":[]}}],"statements":[[{"name":"DialogDisplayBJ","type":"ACTION","isEnabled":true,"parameters":[{"type":"PRESET","value":"ShowHideHide"},{"type":"VARIABLE","value":"DeathVoteDialog"},{"type":"FUNCTION","value":"GetEnumPlayer","statement":{"type":"CALL","isEnabled":true,"name":"GetEnumPlayer","parameters":[]}}]}]]}]]}],[{"name":"DialogDisplayBJ","type":"ACTION","isEnabled":true,"parameters":[{"type":"PRESET","value":"ShowHideShow"},{"type":"VARIABLE","value":"DeathVoteDialog"},{"type":"FUNCTION","value":"GetTriggerPlayer","statement":{"type":"CALL","isEnabled":true,"name":"GetTriggerPlayer","parameters":[]}}]}]]}]]}]}