{"name":"DoorHack","contentType":"TRIGGER","description":"","isEnabled":true,"initiallyOff":false,"runOnMapInit":true,"events":[{"name":"TriggerRegisterAnyUnitEventBJ","type":"EVENT","isEnabled":true,"parameters":[{"type":"PRESET","value":"PlayerUnitEventSpellEffect"}]}],"conditions":[{"name":"OperatorCompareAbilityId","type":"CONDITION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetSpellAbilityId","statement":{"type":"CALL","isEnabled":true,"name":"GetSpellAbilityId","parameters":[]}},{"type":"PRESET","value":"OperatorEqualENE"},{"type":"VALUE","value":"A053"}]}],"actions":[{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempPoint"},{"type":"FUNCTION","value":"GetUnitLoc","statement":{"type":"CALL","isEnabled":true,"name":"GetUnitLoc","parameters":[{"type":"FUNCTION","value":"GetSpellAbilityUnit","statement":{"type":"CALL","isEnabled":true,"name":"GetSpellAbilityUnit","parameters":[]}}]}}]},{"name":"EnumDestructablesInCircleBJMultiple","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"256"},{"type":"VARIABLE","value":"TempPoint"}],"statements":[[{"name":"IfThenElseMultiple","type":"ACTION","isEnabled":true,"parameters":[],"statements":[[{"name":"OrMultiple","type":"CONDITION","isEnabled":true,"parameters":[],"statements":[[{"name":"OperatorCompareDestructableCode","type":"CONDITION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetDestructableTypeId","statement":{"type":"CALL","isEnabled":true,"name":"GetDestructableTypeId","parameters":[{"type":"FUNCTION","value":"GetEnumDestructable","statement":{"type":"CALL","isEnabled":true,"name":"GetEnumDestructable","parameters":[]}}]}},{"type":"PRESET","value":"OperatorEqualENE"},{"type":"VALUE","value":"B000"}]},{"name":"OperatorCompareDestructableCode","type":"CONDITION","isEnabled":true,"parameters":[{"type":"FUNCTION","value":"GetDestructableTypeId","statement":{"type":"CALL","isEnabled":true,"name":"GetDestructableTypeId","parameters":[{"type":"FUNCTION","value":"GetEnumDestructable","statement":{"type":"CALL","isEnabled":true,"name":"GetEnumDestructable","parameters":[]}}]}},{"type":"PRESET","value":"OperatorEqualENE"},{"type":"VALUE","value":"B001"}]}]]}],null,[{"name":"ReturnAction","type":"ACTION","isEnabled":true,"parameters":[]}]]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"set udg_TempTrigger=LoadTriggerHandle(LS(), GetHandleId(GetEnumDestructable()), StringHash(\"t1\")) "}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"set udg_TempBool=IsTriggerEnabled(udg_TempTrigger)"}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"set udg_TempBool2=udg_TempTrigger!=null"}]},{"name":"IfThenElseMultiple","type":"ACTION","isEnabled":true,"parameters":[],"statements":[[{"name":"AndMultiple","type":"CONDITION","isEnabled":true,"parameters":[],"statements":[[{"name":"OperatorCompareBoolean","type":"CONDITION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempBool"},{"type":"PRESET","value":"OperatorEqualENE"},{"type":"VALUE","value":"true"}]},{"name":"OperatorCompareBoolean","type":"CONDITION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempBool2"},{"type":"PRESET","value":"OperatorEqualENE"},{"type":"VALUE","value":"true"}]}]]}],[{"name":"DisableTrigger","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempTrigger"}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"set udg_TempTrigger=LoadTriggerHandle(LS(), GetHandleId(GetEnumDestructable()), StringHash(\"t2\")) "}]},{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempDoorHack"},{"type":"VALUE","value":"true"}]},{"name":"TriggerExecute","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempTrigger"}]},{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempDoorHack"},{"type":"VALUE","value":"false"}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"call DestructableRestoreLife(LoadDestructableHandle(LS(), GetHandleId(udg_TempTrigger),StringHash(\"doorpath\")),999999,true)"}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"call DisplayTimedTextToPlayer(GetOwningPlayer(GetSpellAbilityUnit()), 0, 0, 11.00, \"|cffffcc00Door locked.|r\")"}]},{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempPoint"},{"type":"FUNCTION","value":"GetDestructableLoc","statement":{"type":"CALL","isEnabled":true,"name":"GetDestructableLoc","parameters":[{"type":"FUNCTION","value":"GetEnumDestructable","statement":{"type":"CALL","isEnabled":true,"name":"GetEnumDestructable","parameters":[]}}]}}]},{"name":"CreateNUnitsAtLoc","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"1"},{"type":"VALUE","value":"e01A"},{"type":"FUNCTION","value":"GetOwningPlayer","statement":{"type":"CALL","isEnabled":true,"name":"GetOwningPlayer","parameters":[{"type":"FUNCTION","value":"GetSpellAbilityUnit","statement":{"type":"CALL","isEnabled":true,"name":"GetSpellAbilityUnit","parameters":[]}}]}},{"type":"VARIABLE","value":"TempPoint"},{"type":"PRESET","value":"RealUnitFacing"}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"call RemoveLocation(udg_TempPoint)"}]},{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"TempUnit"},{"type":"FUNCTION","value":"GetLastCreatedUnit","statement":{"type":"CALL","isEnabled":true,"name":"GetLastCreatedUnit","parameters":[]}}]},{"name":"SetVariable","type":"ACTION","isEnabled":true,"parameters":[{"type":"VARIABLE","value":"CountUpBarColor"},{"type":"VALUE","value":"|cff000000"}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"call SaveDestructableHandle(LS(), GetHandleId(GetLastCreatedUnit()), StringHash(\"kittens\"),GetEnumDestructable())"}]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"call CountUpBar(udg_TempUnit, 30, 0.50, \"DoorResetLock\")"}]}],[{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"call DisplayTimedTextToPlayer(GetOwningPlayer(GetSpellAbilityUnit()), 0, 0, 11.00, \"|cffffcc00Door's not unlocked...|r\")"}]}]]}]]},{"name":"CustomScriptCode","type":"ACTION","isEnabled":true,"parameters":[{"type":"VALUE","value":"call RemoveLocation(udg_TempPoint)"}]}]}